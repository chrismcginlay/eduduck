{% extends "courses/base_course.html" %}
{% load staticfiles %}
{% load tz %}

{% block extra_style %}
    <link rel="stylesheet" href="{% static 'form.css' %}">
{% endblock extra_style %}

{% block breadcrumb %}
<p id='id_breadcrumb'>
    <a href="{% url 'courses.views.index' %}">All Courses</a> &gt;
    {{ course.name }}
    <a href="#">Edit Course</a>
</p>
{% endblock breadcrumb %}
    
{% block contentheading %}
<h2 id='id_page_title'>Editing: {{ course.name }}</h2>
{% endblock contentheading %}

{% block content %}
    {% if course_form.errors or lesson_formset.errors %}
        <div class="errorlist">
            <p>Please correct the following:</p>
        </div>
    {% endif %}
    <form method='post' action='#' class='pure-form pure-form-aligned'>
	{{ lesson_formset.management_form }}
        {% csrf_token %}
	<h3>Basic Details</h3>
	<fieldset id='id_course_basics_area'>
	    {% for field in course_form %}
		<div class='pure-control-group'>
		    {{ field.errors }}
		    {{ field.label_tag }}{{ field }}
		    <br>{{ field.help_text }}
		</div>
	    {% endfor %}
	    <div class='pure-controls'>
            <button 
        	id="id_submit_course_edits" 
        	type="submit" 
        	class="pure-button pure-button-primary">
            Save All Edits
            </button>
	    </div>
	</fieldset>
	<h3>Lessons</h3>
	<fieldset id='id_lesson_formset_area'>
	    {% for form in lesson_formset %}
		{% for field in form.visible_fields %}
		    <div class='pure-control-group'>
			{{ field.errors }}
		    	{{ field.label_tag }}{{ field }}
		    	<br>{{ field.help_text }}
		    </div>
		{% endfor %}
	    	<hr>
	    {% endfor %}
	    <div class='pure-controls'>
	    <button 
        	id="id_submit_lesson_edits" 
        	type="submit" 
        	class="pure-button pure-button-primary">
            Save All Edits
            </button>
	    </div>
	</fieldset>
    </form>
{% endblock content %}
