{% extends "bio/base_bio.html" %}
{% load url from future %}
{% load gravatar %}

{% block contentheading %}
    Bio: {{ user.get_full_name }}
{% endblock contentheading %}

{% block zone1 %}
    <h3>Gravatar</h3>
    <img src="{% gravatar_url user.email 80%}">
    <p>Your profile image is your Gravatar.com avatar, linked to {{ user.email }}</p>
    <p><a href="{% gravatar_profile user.email %}">Visit your Gravatar.com profile.</a></p>

    <h3>Change Your Password</h3>
    <a href="/accounts/password/change/">Change Password</a>

    <h3>Your Details</h3>
    <a href="{%url 'bio.views.edit' %}">Edit Details</a>
    <table border="1">
        <tr><td>Name</td><td>{{ user.get_full_name }}</td></tr>
        <tr><td>Email</td><td>{{ user.email }}</td></tr>
        <tr><td>Motto</td><td>
            {{ bio.signature_line|capfirst }}
        </td></tr>
        <tr><td>Accepted Terms & Conditions</td><td>
            {{ bio.accepted_terms }}
        </td></tr>
        <tr><td>Timezone</td><td>{{ bio.user_tz }}</td></tr>
        <tr><td>Your Courses</td><td>
            <table border='1'><tr><th>Course Name</th>
            <th>Course Home</th><th>Status/History</th></tr>

            {% for uc in usercourses %}
            <tr><td>{{ uc.course.name }}</td>
            <td><a href='{{ uc.course.get_absolute_url }}'>visit</a></td>
            <td><a href='{{ uc.get_absolute_url }}'> 
                {% if uc.active %}
                    active
                {% elif uc.withdrawn %}
                    withdrawn
                {% elif uc.completed %}
                    completed
                {% endif %}
            </a></td></tr>
            {% empty %}
            <p>You have no registered courses</p>
            </tr>
            {% endfor %}
            
            </table>
        </td></tr>
        <tr><td>Webpage</td>
            <td><a href='
            {% filter force_escape %}{{ bio.webpage }}{% endfilter %}
            '>{{ bio.webpage }}</a></td>
        </tr>
        <tr><td>Description</td><td>{{ bio.description }}</td></tr>
    </table>
{% endblock zone1 %}
